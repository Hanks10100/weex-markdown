!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WeexMarkdownComponent=t()}(this,function(){"use strict";function e(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function t(n,r,l,i){void 0===l&&(l=[]);for(var o,a=!1;n;)if(o=s.escape.exec(n))n=n.substring(o[0].length);else if(o=s.link.exec(n)){n=n.substring(o[0].length),a=!0;var p=[];l.push({type:"a",style:r.a,attr:{href:o[2]},children:p}),t(o[1],r,p),a=!1}else if(a||!(o=s.url.exec(n))){if(o=s.strong.exec(n)){n=n.substring(o[0].length);var c=[];l.push({type:"span",style:r.strong,children:c}),t(o[2]||o[1],r,c)}else if(o=s.em.exec(n)){n=n.substring(o[0].length);var u=[];l.push({type:"span",style:r.em,children:u}),t(o[2]||o[1],r,u)}else if(o=s.del.exec(n)){n=n.substring(o[0].length);var d=[];l.push({type:"span",style:r.del,children:d}),t(o[1],r,d,r.del)}else if(o=s.codespan.exec(n))n=n.substring(o[0].length),l.push({type:"span",style:r.codespan,attr:{value:e(o[2],!0)}});else if(o=s.text.exec(n))n=n.substring(o[0].length),l.push({type:"span",style:i,attr:{value:e(o[0])}});else if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0))}else{n=n.substring(o[0].length);var h=e(o[1]);l.push({type:"a",style:r.a,attr:{href:h},children:[{type:"span",attr:{value:h}}]})}}function n(e,n){var s=[];return t(e,n,s),s}var s={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,link:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]\((https?:\/\/[^\s<]+[^<.,:;"')\]\s])\)/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,codespan:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:/^[\s\S]+?(?=[\\<!\[_*`~]|https?:\/\/| {2,}\n|$)/},r=function(e){return e.map(function(e){return e.children?r(e.children):e.text}).join("")};return{name:"markdown",props:{content:String,theme:{type:Object,default:{a:{color:"#3333FF"},codespan:{fontFamily:"monospace",backgroundColor:"#ddd",paddingLeft:20,paddingRight:20,borderRadius:10},del:{textDecoration:"line-through"},em:{fontStyle:"italic"},strong:{fontWeight:700}}}},render:function(e){return e("richtext",{style:{fontSize:60,color:"#404040"},attrs:{value:n(this.content||r(this.$slots.default),this.theme)}})}}});
