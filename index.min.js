!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WeexMarkdownComponent=t()}(this,function(){"use strict";function e(e){var t=i.exec(e);return t?{width:parseInt(t[1],10),height:parseInt(t[2]||t[1],10)}:{width:0,height:0}}function t(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function n(r,s,i,p){void 0===i&&(i=[]);for(var o,l=!1,h=null;r;)if(o=a.escape.exec(r))r=r.substring(o[0].length);else{if(o=a.heading.exec(r)){r=r.substring(o[0].length),h="h"+o[1].length;var g=[];n(o[2],s,g,s[h]),g.length&&i.push({type:"span",style:s[h],children:g})}if(o=a.image.exec(r))r=r.substring(o[0].length),h="image",i.push({type:"image",style:Object.assign(e(o[1]),s.image),attr:{resize:"contain",title:o[1],src:o[2]}});else if(o=a.link.exec(r)){r=r.substring(o[0].length),l=!0;var c=[];n(o[1],s,c),c.length&&(h="a",i.push({type:"a",style:s.a,attr:{href:o[2]},children:c})),l=!1}else if(l||!(o=a.url.exec(r))){if(o=a.strong.exec(r)){r=r.substring(o[0].length);var u=[];n(o[2]||o[1],s,u),u.length&&i.push({type:"span",style:s.strong,children:u})}else if(o=a.em.exec(r)){r=r.substring(o[0].length);var f=[];n(o[2]||o[1],s,f),f.length&&i.push({type:"span",style:s.em,children:f})}else if(o=a.del.exec(r)){r=r.substring(o[0].length);var d=[];n(o[1],s,d,s.del),d.length&&i.push({type:"span",style:s.del,children:d})}else if(o=a.codespan.exec(r))r=r.substring(o[0].length),i.push({type:"span",attr:{value:" "}}),i.push({type:"span",style:Object.assign({},s.codespan,p),attr:{value:t(o[2],!0)}}),i.push({type:"span",attr:{value:" "}});else if(o=a.text.exec(r))r=r.substring(o[0].length),i.push({type:"span",style:Object.assign({},s.text,p),attr:{value:t(o[0])}});else if(r)throw new Error("Infinite loop on byte: "+r.charCodeAt(0))}else{r=r.substring(o[0].length);var m=t(o[1]);h="a",i.push({type:"a",style:s.a,attr:{href:m},children:[{type:"span",attr:{value:m}}]})}}return h}function r(e,t){void 0===t&&(t={});var r=[];return{rootType:n(e,t,r),nodes:r}}function s(e){return e.split(o).map(function(e){return e.replace(/[\s\n\t]+/g," ").trim()})}var a={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,image:/^!\[((?:\[[^\]]*\]|[^\[\]])*)\]\((https?:\/\/[^\s<]+[^<.,:;"')\]\s])(\s+\=[x\d]+)?\)/,link:/^\[((?:\[[^\]]*\]|[^\[\]])*)\]\((https?:\/\/[^\s<]+[^<.,:;"')\]\s])\)/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,codespan:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:/^[\s\S]+?(?=[\\<!\[_*`~]|https?:\/\/| {2,}\n|$)/},i=/\{(\d+)x(\d+)?\}/i,p=function(e){return e.map(function(e){return e.children?p(e.children):e.text}).join("")},o=/[\n\t]{2,}/,l={a:{color:"#3333FF"},codespan:{fontFamily:"monospace",fontSize:"32px",backgroundColor:"#E8E8E8",paddingLeft:2,paddingRight:2,marginLeft:2,marginRight:2,borderRadius:3},del:{textDecoration:"line-through"},em:{fontStyle:"italic"},h1:{fontSize:"74px",textAlign:"center"},h2:{fontSize:"62px"},h3:{fontSize:"50px"},h4:{fontSize:"38px"},h5:{fontSize:"28px"},h6:{fontSize:"18px"},strong:{fontWeight:700},text:{fontSize:"32px"},imageWrapper:{alignSelf:"center",marginTop:"20px",marginBottom:"20px"},h1Wrapper:{alignSelf:"center",marginTop:"30px",marginBottom:"30px"},h2Wrapper:{marginTop:"24px",marginBottom:"24px"},h3Wrapper:{marginTop:"18px",marginBottom:"18px"},blockWrapper:{color:"#333",marginTop:"12px",marginBottom:"12px"}};return{name:"markdown",props:{content:String,theme:Object},methods:{getStyles:function(){var e=this;if(!this.theme)return l;var t={};for(var n in l)t[n]=Object.assign({},l[n],e.theme[n]);return t}},render:function(e){var t=this.content||p(this.$slots.default),n=this.getStyles();return e("div",{},s(t).map(function(t){var s=r(t,n),a=s.rootType,i=s.nodes,p=n.blockWrapper;switch(a){case"image":return e("image",{style:Object.assign({},n.imageWrapper,i[0].style),attrs:Object.assign({},i[0].attr)});case"h1":p=n.h1Wrapper;break;case"h2":p=n.h2Wrapper;break;case"h3":p=n.h3Wrapper}return e("richtext",{style:p,attrs:{value:i}})}))}}});
