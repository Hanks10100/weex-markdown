!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WeexMarkdownComponent=t()}(this,function(){"use strict";function e(e){var t=a.exec(e);return t?{width:parseInt(t[1],10),height:parseInt(t[2]||t[1],10)}:{width:0,height:0}}function t(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function n(s,r,a,l){void 0===a&&(a=[]);for(var o,p=!1;s;)if(o=i.escape.exec(s))s=s.substring(o[0].length);else{if(o=i.heading.exec(s)){s=s.substring(o[0].length);var h=o[1].length,c=[];n(o[2],r,c,r["h"+h]),c.length&&a.push({type:"span",style:r["h"+h],children:c})}if(o=i.image.exec(s))s=s.substring(o[0].length),a.push({type:"image",style:Object.assign(e(o[1]),r.image),attr:{resize:"contain",title:o[1],src:o[2]}});else if(o=i.link.exec(s)){s=s.substring(o[0].length),p=!0;var u=[];n(o[1],r,u),u.length&&a.push({type:"a",style:r.a,attr:{href:o[2]},children:u}),p=!1}else if(p||!(o=i.url.exec(s))){if(o=i.strong.exec(s)){s=s.substring(o[0].length);var g=[];n(o[2]||o[1],r,g),g.length&&a.push({type:"span",style:r.strong,children:g})}else if(o=i.em.exec(s)){s=s.substring(o[0].length);var f=[];n(o[2]||o[1],r,f),f.length&&a.push({type:"span",style:r.em,children:f})}else if(o=i.del.exec(s)){s=s.substring(o[0].length);var d=[];n(o[1],r,d,r.del),d.length&&a.push({type:"span",style:r.del,children:d})}else if(o=i.codespan.exec(s))s=s.substring(o[0].length),a.push({type:"span",style:Object.assign({},r.codespan,l),attr:{value:t(o[2],!0)}});else if(o=i.text.exec(s))s=s.substring(o[0].length),a.push({type:"span",style:Object.assign({},r.text,l),attr:{value:t(o[0])}});else if(s)throw new Error("Infinite loop on byte: "+s.charCodeAt(0))}else{s=s.substring(o[0].length);var x=t(o[1]);a.push({type:"a",style:r.a,attr:{href:x},children:[{type:"span",attr:{value:x}}]})}}}function s(e,t){void 0===t&&(t={});var s=[];return n(e,t,s),s}function r(e){return e.split(o).map(function(e){return e.replace(/[\s\n\t]+/g," ").trim()})}var i={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,image:/^!\[((?:\[[^\]]*\]|[^\[\]])*)\]\((https?:\/\/[^\s<]+[^<.,:;"')\]\s])(\s+\=[x\d]+)?\)/,link:/^\[((?:\[[^\]]*\]|[^\[\]])*)\]\((https?:\/\/[^\s<]+[^<.,:;"')\]\s])\)/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,codespan:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:/^[\s\S]+?(?=[\\<!\[_*`~]|https?:\/\/| {2,}\n|$)/},a=/\{(\d+)x(\d+)?\}/i,l=function(e){return e.map(function(e){return e.children?l(e.children):e.text}).join("")},o=/[\n\t]{2,}/;return{name:"markdown",props:{content:String,theme:{type:Object,default:function(){return{a:{color:"#3333FF"},codespan:{fontFamily:"monospace",backgroundColor:"#E8E8E8",paddingLeft:5,paddingRight:5,borderRadius:3},del:{textDecoration:"line-through"},em:{fontStyle:"italic"},h1:{fontSize:"74px",textAlign:"center"},h2:{fontSize:"62px"},h3:{fontSize:"50px"},h4:{fontSize:"38px"},h5:{fontSize:"28px"},h6:{fontSize:"18px"},strong:{fontWeight:700},text:{fontSize:"32px"}}}}},render:function(e){var t=this,n=this.content||l(this.$slots.default);return e("div",{},r(n).map(function(n){return e("richtext",{style:{marginTop:"12px",marginBottom:"12px"},attrs:{value:s(n,t.theme)}})}))}}});
